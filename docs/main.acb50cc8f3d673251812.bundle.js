webpackJsonp([1,4],{301:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.mass=10,this.rollDrag=.1}return t.prototype.nextStep=function(){this.x=this.x+this.vx,this.y=this.y+this.vy},t.prototype.getShape=function(){return this.shape},t}()},302:function(t,e,n){"use strict";var o=n(457),r=n(301),i=n(459),a=n(303);n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragForce=[0,0],e.rollingForce=[0,0],e.engineForce=[0,0],e.bulletSpeed=10,e.bulletRadius=2,e.bulletColor="red",e.maxBullets=10,e.ownBullets=[],e}return s(e,t),e.prototype.initShape=function(){if(this.size&&this.color)this.shape=new i.a(this.size,this.color);else{if(!this.size)throw Error("Size is not defined");this.shape=new i.a(this.size)}},e.prototype.nextStep=function(){this.calculateDragForce(),this.calculateRollingForce(),this.calculateAcceleration(),this.calculateSpeed(),t.prototype.nextStep.call(this),this.draw(),this.resetEngineForce()},e.prototype.draw=function(){this.shape.draw(this.x,this.y,this.rotation)},e.prototype.resetEngineForce=function(){this.engineForce=[0,0]},e.prototype.changeRotation=function(t){this.rotation=this.rotation+t},e.prototype.forward=function(t){this.engineForce[0]=Math.sin(this.rotation-3*Math.PI/4)*t,this.engineForce[1]=Math.cos(this.rotation-3*Math.PI/4)*t},e.prototype.calculateDragForce=function(){this.dragForce[0]=-this.drag*Math.pow(this.vx,2)*Math.sign(this.vx),this.dragForce[1]=-this.drag*Math.pow(this.vy,2)*Math.sign(this.vy)},e.prototype.calculateRollingForce=function(){this.rollingForce[0]=-this.rollDrag*this.vx,this.rollingForce[1]=-this.rollDrag*this.vy},e.prototype.calculateAcceleration=function(){var t=this.engineForce[0]+this.dragForce[0]+this.rollingForce[0],e=this.engineForce[1]+this.dragForce[1]+ +this.rollingForce[1];this.ax=t/this.mass,this.ay=e/this.mass},e.prototype.calculateSpeed=function(){this.vx=this.vx+this.ax*a.a,this.vy=this.vy+this.ay*a.a},e.prototype.showCurrentInfo=function(t){console.log(t+" vx: "+this.vx+"  vy: "+this.vy)},e.prototype.shoot=function(){if(this.ownBullets.length<this.maxBullets){var t=new o.a;return t.owner=this,t.rotation=this.rotation-3*Math.PI/4,t.x=this.x,t.y=this.y,t.color=this.bulletColor,t.setSpeed(this.bulletSpeed),t.setBulletRadius(this.bulletRadius),this.ownBullets.push(t),!0}return!1},e}(r.a)},303:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=1e3/60},346:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=346},347:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(435),r=n(0),i=n(465),a=n(456);i.a.production&&n.i(r.a)(),n.i(o.a)().bootstrapModule(a.a)},455:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=function(){function t(){this.title="app works!"}return t=r([n.i(o.U)({selector:"app-root",template:n(622),styles:[n(618)]})],t)}()},456:function(t,e,n){"use strict";var o=n(192),r=n(0),i=n(425),a=n(431),s=n(455),l=n(464),c=n(462),p=n(463);n.d(e,"a",function(){return h});var u=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},h=function(){function t(){}return t=u([n.i(r.b)({declarations:[s.a,l.a,c.a,p.a],imports:[o.a,i.a,a.a],providers:[],bootstrap:[s.a]})],t)}()},457:function(t,e,n){"use strict";var o=n(301),r=n(458);n.d(e,"a",function(){return a});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setSpeed=function(t){this.vx=Math.sin(this.rotation)*t,this.vy=Math.cos(this.rotation)*t},e.prototype.setBulletRadius=function(t){this.shape=new r.a(t)},e.prototype.nextStep=function(){t.prototype.nextStep.call(this),this.draw()},e.prototype.draw=function(){this.shape.draw(this.x,this.y)},e}(o.a)},458:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e="red"),this.bulletRadius=t,this.color=e}return t.prototype.draw=function(t,e){this.shape=new Path2D,this.shape.moveTo(t,e),this.shape=new Path2D,this.shape.arc(t,e,this.bulletRadius,0,2*Math.PI,!0),this.shape.closePath()},t}()},459:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e="red"),this.size=t,this.color=e}return t.prototype.draw=function(t,e,n){this.shape=new Path2D,this.shape.moveTo(t,e),this.nextFirstPoint(t,e,n),this.nextSecondPoint(t,e,n),this.shape.lineTo(t,e)},t.prototype.nextFirstPoint=function(t,e,n){var o=t+Math.sin(n)*this.size,r=e+Math.cos(n)*this.size;this.shape.lineTo(o,r)},t.prototype.nextSecondPoint=function(t,e,n){var o=t+Math.sin(n+Math.PI/2)*this.size,r=e+Math.cos(n+Math.PI/2)*this.size;this.shape.lineTo(o,r)},t}()},460:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r});var o=700,r=700},461:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={keyA:65,keyS:83,keyD:68,keyW:87,spaceBar:32};Object.freeze(o)},462:function(t,e,n){"use strict";var o=n(0),r=n(302),i=n(461),a=n(460),s=n(303);n.d(e,"a",function(){return p});var l=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(){this.player1=new r.a,this.key=[],this.bullets=[]}return t.prototype.ngOnInit=function(){var t=this;this.canvas=document.getElementById("canvas"),document.body.onmouseover=function(){t.canvas.focus()},document.addEventListener("keyup",function(e){t.key[e.keyCode]="keydown"==e.type},!1),document.addEventListener("keydown",function(e){t.key[e.keyCode]="keydown"==e.type},!1),this.ctx=this.canvas.getContext("2d"),this.reset(),this.nextStep()},t.prototype.nextStep=function(){var t=this;this.ctx.clearRect(0,0,800,800),this.keyListener(),this.wallCollision(this.player1),this.player1.nextStep(),this.ctx.fillStyle=this.player1.color,this.ctx.fill(this.player1.getShape().shape),this.player1.ownBullets=this.player1.ownBullets.filter(function(e){return!t.bulletWallCollision(e)}),this.drawBullets(this.player1.ownBullets),this.keyListener(),setTimeout(function(){return t.nextStep()},s.a)},t.prototype.keyListener=function(){for(var t=this.key.length,e=0;e<t;e++)if(this.key[e])switch(e){case i.a.keyA:this.player1.changeRotation(this.player1.torque);break;case i.a.keyD:this.player1.changeRotation(-this.player1.torque);break;case i.a.keyW:this.player1.forward(this.player1.forwardThrottle);break;case i.a.keyS:this.player1.forward(-this.player1.backwardThrottle);break;case i.a.spaceBar:this.player1.shoot()}},t.prototype.reset=function(){this.player1.x=200,this.player1.y=200,this.player1.vx=-1,this.player1.vy=-1,this.player1.size=30,this.player1.rotation=Math.PI,this.player1.drag=.01,this.player1.forwardThrottle=1,this.player1.backwardThrottle=.5,this.player1.torque=.05,this.player1.color="rgb(255,0,255)",this.player1.initShape()},t.prototype.drawBullets=function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];o.nextStep(),this.ctx.fillStyle=o.color,this.ctx.fill(o.getShape().shape)}},t.prototype.wallCollision=function(t){t.x+t.vx<=0&&(t.vx=0,t.x=0),t.y+t.vy<=0&&(t.vy=0,t.y=0),t.x+t.vx>=a.a&&(t.vx=0,t.x=a.a),t.y+t.vy>=a.b&&(t.vy=0,t.y=a.a)},t.prototype.bulletWallCollision=function(t){return t.x+t.vx<=0||(t.y+t.vy<=0||(t.x+t.vx>=a.a||t.y+t.vy>=a.b))},t=l([n.i(o.U)({selector:"app-game-wrapper",template:n(623),styles:[n(619)]}),c("design:paramtypes",[])],t)}()},463:function(t,e,n){"use strict";var o=n(0),r=n(302);n.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},i([n.i(o.w)(),a("design:type","function"==typeof(e=void 0!==r.a&&r.a)&&e||Object)],t.prototype,"player",void 0),t=i([n.i(o.U)({selector:"app-player-info",template:n(624),styles:[n(620)]}),a("design:paramtypes",[])],t);var e}()},464:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return a});var r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){this.message="",this.messages=[]}return t.prototype.ngOnInit=function(){var t=this;this.webSocket=new WebSocket("ws://127.0.0.1:1337"),this.webSocket.onopen=function(){},this.webSocket.onerror=function(t){},this.webSocket.onmessage=function(e){try{var n=JSON.parse(e.data);t.messages.push(n)}catch(t){return void console.log("This doesn't look like a valid JSON: ",e.data)}}},t.prototype.sendMessage=function(){this.webSocket.send(this.message),this.message=""},t=r([n.i(o.U)({selector:"app-web-socket",template:n(625),styles:[n(621)]}),i("design:paramtypes",[])],t)}()},465:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},618:function(t,e){t.exports=""},619:function(t,e){t.exports=":host{display:-ms-flexbox;display:flex}canvas{border:1px solid #000}"},620:function(t,e){t.exports=".player-info-wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.player-info-cell{height:50px}"},621:function(t,e){t.exports=""},622:function(t,e){t.exports="<h1>\n  {{title}}\n</h1>\n<app-web-socket></app-web-socket>\n<app-game-wrapper></app-game-wrapper>"},623:function(t,e){t.exports='<h2>Game </h2>\n<button (click) = "reset()">NexStep</button>\n    <canvas width="700" height="700" id="canvas"></canvas>\n    <app-player-info [player]="player1"></app-player-info>'},624:function(t,e){t.exports='<div class="player-info-wrapper">\n  <div class="player-info-cell">\n    Posicion X: {{player.x | number}}\n  </div>\n  <div class="player-info-cell">\n    Posicion Y: {{player.y | number }}\n  </div>\n  <div class="player-info-cell">\n    Velocidad x: {{player.vx | number}}\n  </div>\n  <div class="player-info-cell">\n    Velocidad y: {{player.vy | number}}\n  </div>\n  <div class="player-info-cell">\n    RollingDragForce X: {{player.rollingForce[0] | number}}\n    RollingDragForce Y: {{player.rollingForce[1] | number}}\n  </div>\n  <div class="player-info-cell">\n    Aceleracion : <input [(ngModel)]="player.forwardThrottle"  type="range" min="0" max="15" step="0.1"> {{player.forwardThrottle | number}}\n  </div>\n  <div class="player-info-cell">\n    Deceleracion : <input [(ngModel)]="player.backwardThrottle" type="range" min="0" max="5" step="0.1"> {{player.backwardThrottle | number}}\n  </div>\n  <div class="player-info-cell">\n    Torque : <input [(ngModel)]="player.torque"  type="range" min="0" max="0.1" step="0.001"> {{player.torque | number}}\n  </div>\n  <div class="player-info-cell">\n    Drag : <input [(ngModel)]="player.drag"  type="range" min="0" max="1" step="0.001"> {{player.drag | number}}\n  </div>\n  <div class="player-info-cell">\n    Roll drag : <input [(ngModel)]="player.rollDrag"  type="range" min="0" max="1" step="0.001"> {{player.rollDrag | number}}\n  </div>\n  <div class="player-info-cell">\n    Mass : <input [(ngModel)]="player.mass"  type="range" min="0" max="500" step="1"> {{player.mass | number}}\n  </div>\n  <div class="player-info-cell">\n    Bullets : <input [(ngModel)]="player.maxBullets"  type="range" min="0" max="100" step="1"> {{player.maxBullets | number}}\n  </div>\n</div>'},625:function(t,e){t.exports='<p>\n  web-socket works!\n\n  <input [(ngModel)] = "message">\n  <button (click) = "sendMessage()">Enviar</button>\n</p>\n\n<p *ngFor="let message of messages">{{message}}</p>\n'},639:function(t,e,n){t.exports=n(347)}},[639]);